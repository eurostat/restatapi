<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load configuration data from JSON — load_cfg • restatapi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Load configuration data from JSON — load_cfg"><meta property="og:description" content="Load the configuration information to the '.restatapi_env' from the JSON configuration file."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">restatapi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.24.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/eurostat/restatapi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load configuration data from JSON</h1>
    <small class="dont-index">Source: <a href="https://github.com/eurostat/restatapi/blob/master/R/load_cfg.R" class="external-link"><code>R/load_cfg.R</code></a></small>
    <div class="hidden name"><code>load_cfg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Load the configuration information to the '.restatapi_env' from the JSON configuration file.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_cfg</span><span class="op">(</span></span>
<span>  api_version <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  cfg_file <span class="op">=</span> <span class="st">"github"</span>,</span>
<span>  load_toc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_cores <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-api-version">api_version<a class="anchor" aria-label="anchor" href="#arg-api-version"></a></dt>
<dd><p>It can be either "old", "new", "test" or "current". The default value is "current" which defined by the DEFAULT_API_VERSION value of the config file.</p></dd>


<dt id="arg-cfg-file">cfg_file<a class="anchor" aria-label="anchor" href="#arg-cfg-file"></a></dt>
<dd><p>The location of the config file. It can be either "github" (the default value) or "local".</p></dd>


<dt id="arg-load-toc">load_toc<a class="anchor" aria-label="anchor" href="#arg-load-toc"></a></dt>
<dd><p>The default value <code>FALSE</code>, which means that the XML version of the Table of contents (TOC) will not be downloaded and
cached automatically in the '.restatapi_env' when the package is loaded.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>A boolean with the default value <code>TRUE</code>. If there are multiple cores/logical processors then part of the data
extraction is made in parallel reducing significantly the time needed for large datasets. If the value is <code>FALSE</code> the option <code>restatapi_cores</code> set to 1.</p></dd>


<dt id="arg-max-cores">max_cores<a class="anchor" aria-label="anchor" href="#arg-max-cores"></a></dt>
<dd><p>A boolean with the default value <code>FALSE</code>. If the parameter 'parallel' is <code>TRUE</code> then this parameter is taken into account otherwise it is ignored.
If the value is <code>TRUE</code>, then the maximum minus one cores/logical processors are used for parallel computing. If the parameter <code>FALSE</code>,
then the default value of <code>getOption("mc.cores")</code> is used, if it is defined. If <code>mc.cores</code> is <code>NULL</code> then depending on the memory size and number of available cores/threads the <code>restatapi_cores</code> are set to 2 or 4 cores/logical processors.
Otherwise the parallel processing turned off by setting the option <code>restatapi_cores</code> to 1.
The number of cores used for parallel computing can be changed any time with <code>options(restatapi_cores=...)</code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A boolean if the verbose message about the configuration to be showed or not. The default is <code>FALSE</code>. Can be set also with <code>options(restatapi_verbose=TRUE)</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>it returns 4 objects in the '.restatapi_env'</p><ul><li><p><code>cfg</code> a list with all the configuration data</p></li>
<li><p><code>rav</code> a character string with a number defining the API_VERSION from the configuration file to be used later. It is
             determined based on the <code>api_version</code> parameter.</p></li>
<li><p><code>cc</code> a list containing the 2 character country codes of the member states for different EU composition like EU15, EU28 or EA (Euro Area).</p></li>
<li><p><code>dmethod</code> the download method to be used to access Eurostat database. If the 'libcurl' method exists under Windows then
             it will be the default method for file download, otherwise it will be set 'auto'. The download method can be changed any time with <code>options(restatapi_dmethod=...)</code></p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>Loads configuration data from a JSON file. The function first tries to load the configuration file from GitHub.
         If it is not possible it loads from the file delivered with the package. By this way different version of the API can be tested.
         Since in many cases there is http/https redirection in the download which can cause problems with the 'wininet' download method, the 'libcurl' method is used when it is available.
         This configuration code sets up the parallel processing to handle large XML files efficiently. By default if there is more then 4 cores/logical processors and at least 32 GB of RAM then
         4 cores are used for parallel computing. If there is more then 2 cores then 2 cores are used. This default configuration can be overwritten with <code>options(restatapi_cores=...)</code> or with the <code>max_cores=TRUE</code> parameter.
         In the second case part of the computation distributed over the maximum number minus one cores. By using the <code>max_cores=TRUE</code> option there is a higher probability that the program will run out off memory for larger datasets.
         In addition, the list of country codes are loaded to the variable <code>cc</code> (country codes), based on the <a href="https://webgate.ec.europa.eu/fusionregistry/sdmx/v2/structure/codelist/ESTAT/SCL_GEO_EUEFTACC/1.0" class="external-link">Eurostat standard code list</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu">load_cfg</span><span class="op">(</span>parallel<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>restatapi_dmethod<span class="op">=</span><span class="st">"auto"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">load_cfg</span><span class="op">(</span>api_version<span class="op">=</span><span class="st">"test"</span>,verbose<span class="op">=</span><span class="cn">TRUE</span>,max_cores<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> restatapi: - version 0.24.5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>            - config file with the API version 3 loaded from GitHub (the 'current' API version number is 2).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>            - 2 from the 4 cores are used for parallel computing, can be changed with 'options(restatapi_cores=...)'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>            - 'auto' method will be used for file download, can be changed with 'options(restatapi_dmethod=...)'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>            - the Table of contents (TOC) was not pre-loaded into the deafult cache ('.restatapi_env').</span>
<span class="r-in"><span><span class="fu">load_cfg</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eu</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"cc"</span>,envir<span class="op">=</span><span class="va">.restatapi_env</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eu</span><span class="op">$</span><span class="va">EU28</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "BE" "BG" "CZ" "DK" "DE" "EE" "IE" "EL" "ES" "FR" "HR" "IT" "CY" "LV" "LT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "LU" "HU" "MT" "NL" "AT" "PL" "PT" "RO" "SI" "SK" "FI" "SE" "UK"</span>
<span class="r-in"><span><span class="va">eu</span><span class="op">$</span><span class="va">EA15</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "BE" "DE" "IE" "EL" "ES" "FR" "IT" "CY" "LU" "MT" "NL" "AT" "PT" "SI" "FI"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mátyás Mészáros.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

